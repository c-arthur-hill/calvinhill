RewriteEngine On
RewriteCond %{HTTP_HOST:X-Forwarded-Proto} !^www\. [NC]
RewriteRule (.*) https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]